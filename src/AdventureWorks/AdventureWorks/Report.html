<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report</title>
    <link href="/Content/bootstrap.css" rel="stylesheet" />
    <link href="/Content/site.css" rel="stylesheet" />
    <script src="/Scripts/modernizr-2.6.2.js"></script>
    <script src="/Scripts/jquery-1.10.2.js"></script>

    <script src="/Scripts/jquery.signalR-2.2.2.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>

    <script src="/Scripts/d3/d3.v4.min.js"></script>
    <script src="/Scripts/d3/pie.js"></script>
    <script src="/Scripts/d3/barChart.js"></script>

    <style>
        .bar {
            fill: steelblue;
        }

            .bar:hover {
                fill: brown;
            }
    </style>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/SalesOrders">Sales</a>
                <a class="navbar-brand" href="/Customer">Customers</a>
                <a class="navbar-brand" href="/Report.html">Report</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/Home/About">About</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container body-content">
        
        <h1>Number of orders per ship method</h1>
        <svg id="pie" width="600" height="400"></svg>

        <script type="text/javascript">
            $(function () {
                // Declare a proxy to reference the hub.
                var notifications = $.connection.messagesHub;

                // Create a function that the hub can call to broadcast messages.
                notifications.client.updateMessages = function (data) {
                    $("svg#pie").empty();
                    var c = new BarChart("svg#pie", { innerRadius: 20 });
                    c.Data(data);
                };
                // Start the connection.
                $.connection.hub.start()
                    .fail(function (e) {
                        alert(e);
                    });
            });

            $.ajax({
                url: '/Home/GetData',
                type: 'GET',
                dataType: 'json'
            }).success(function (data) {
                $("svg#pie").empty();
                var c = new BarChart("svg#pie", { topMargin: 0.1 });
                c.Data(data);
            }).error(function (e) {
                alert(e);
            });
        </script>
        }
    </div>
    <footer>
        <span>Server:</span>
        <a href="https://msftdbprodsamples.codeplex.com/releases/view/125550" target="_blank"
           title="SQL Server Adventure Works 2014">.\SQLEXPRESS</a> |

        <span>Database:</span>
        <a href="https://msftdbprodsamples.codeplex.com/releases/view/125550" target="_blank"
           title="SQL Server Adventure Works">AdventureWorks2014</a> |
        |
        <span>Source:</span>
        <a href="https://github.com/RandomFractals/AdventureWorks" target="_blank"
           title="RFI/Adventure Works project github">RFI/Adventure Works</a>
        <span>v. 0.0.1 | &copy;Random Fractals Inc. 2016</span>
    </footer>
    
    <!--<script src="/Scripts/bootstrap.js"></script>
    <script src="/Scripts/respond.js"></script>-->

</body>
</html>
